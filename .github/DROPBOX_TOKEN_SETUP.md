# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Dropbox Access Token –¥–ª—è GitHub Actions

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±: Refresh Token (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

**üìå –≠—Ç–æ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç) - –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –æ–±–ª–∞–∫–∞!**

### –ü–æ—á–µ–º—É Refresh Token?

- Access tokens –∏—Å—Ç–µ–∫–∞—é—Ç —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤, —Ç—Ä–µ–±—É—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- Refresh tokens –¥–µ–π—Å—Ç–≤—É—é—Ç –º–µ—Å—è—Ü—ã/–≥–æ–¥—ã –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å access token
- –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- Workflow —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è refresh token –º–µ—Ö–∞–Ω–∏–∑–º–∞

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å Refresh Token

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   cd "/Users/nikolay/Library/CloudStorage/Dropbox/Nov25/Design/Safonova Eleonora/Safonova Eleonora/AdminRHS-AI-Catalog-4"
   python3 scripts/get_refresh_token.py
   ```

2. –í–≤–µ–¥–∏—Ç–µ App Key –∏ App Secret –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–æ

3. –°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç URL –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ - –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

4. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Dropbox

5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª

6. –°–∫—Ä–∏–ø—Ç –≤—ã–≤–µ–¥–µ—Ç –≤—Å–µ —Ç–æ–∫–µ–Ω—ã - —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/AdminRHS/AdminRHS-AI-Catalog-4/settings/secrets/actions
2. –î–æ–±–∞–≤—å—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ 4 —Å–µ–∫—Ä–µ—Ç–∞:
   - `DROPBOX_ACCESS_TOKEN` - access token –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞
   - `DROPBOX_APP_KEY` - –≤–∞—à App Key
   - `DROPBOX_APP_SECRET` - –≤–∞—à App Secret
   - `DROPBOX_REFRESH_TOKEN` - refresh token –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é - —Ç–æ–∫–µ–Ω—ã –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±: –¢–æ–ª—å–∫–æ Access Token (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `expired_access_token` –≤ –ª–æ–≥–∞—Ö GitHub Actions, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Dropbox Access Token –∏—Å—Ç–µ–∫ –∏ –µ–≥–æ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å.

### –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å Dropbox App

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://www.dropbox.com/developers/apps
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç Dropbox
3. –ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "Permissions"
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω—ã –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
4. –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ—Ç:
   - –ù–∞–∂–º–∏—Ç–µ "Create app"
   - –í—ã–±–µ—Ä–∏—Ç–µ "Scoped access"
   - –í—ã–±–µ—Ä–∏—Ç–µ "Full Dropbox" –∏–ª–∏ "App folder" (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö –Ω—É–∂–¥)
   - –ù–∞–∑–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "AI Catalog Sync")
   - –ù–∞–∂–º–∏—Ç–µ "Create app"

### –®–∞–≥ 2: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Access Token

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "OAuth 2"
2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ —Å–µ–∫—Ü–∏–∏ "Generated access token"
3. –ù–∞–∂–º–∏—Ç–µ "Generate" —Ä—è–¥–æ–º —Å "Access token"
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω (–æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ GitHub Secrets

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub: `https://github.com/AdminRHS/AdminRHS-AI-Catalog-4`
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Settings**
3. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Secrets and variables** > **Actions**
4. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç `DROPBOX_ACCESS_TOKEN`
5. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ **Update**
6. –í—Å—Ç–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –≤ –ø–æ–ª–µ "Value"
7. –ù–∞–∂–º–∏—Ç–µ **Update secret**

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Actions** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –ù–∞–π–¥–∏—Ç–µ workflow "Sync AI Catalog from AI_list.json"
3. –ù–∞–∂–º–∏—Ç–µ **Run workflow** > **Run workflow** (–¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è - –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ refresh token credentials
2. –ï—Å–ª–∏ –æ–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã, –æ–±–Ω–æ–≤–ª—è–µ—Ç access token –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–π access token –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
4. –ï—Å–ª–∏ refresh token –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π access token (–º–æ–∂–µ—Ç –∏—Å—Ç–µ—á—å)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Ç–æ–∫–µ–Ω, –≤—ã–ø–æ–ª–Ω–∏–≤:

```bash
curl -X POST https://api.dropboxapi.com/2/users/get_current_account \
  --header "Authorization: Bearer YOUR_TOKEN_HERE"
```

–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ Dropbox.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ GitHub Secrets –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤.

